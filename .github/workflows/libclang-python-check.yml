name: Libclang Python Binding Static Type Check


permissions:
  contents: read

on:
  workflow_dispatch:
  # push:

jobs:
  build:

    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        # os: [ubuntu-latest, macos-latest, windows-latest]
        os: [ubuntu-latest]
        # python-version: ["3.9", "3.10", "3.11", "pypy3.9", "pypy3.10"]
        python-version: ["3.7"]
        exclude:
          - os: macos-latest
            python-version: "3.9"
          - os: windows-latest
            python-version: "3.9"

    steps:
      - name: Checkout source
        uses: actions/checkout@v4
        # Python project is in root repo.
        # with:
        #   fetch-depth: 250

      - name: Set up Python
        # This is the version of the action for setting up Python, not the Python version.
        uses: actions/setup-python@v4
        with:
          # Semantic version range syntax or exact version of a Python version
          #python-version: '3.x'
          python-version: ${{ matrix.python-version }}
          # Optional - x64 or x86 architecture, defaults to x64
          # architecture: 'x64'

      - name: Display Python version
        run: python -c "import sys; print(sys.version)"

      - uses: jakebailey/pyright-action@v1
        with:
          # Optional - The version of Pyright to use. Defaults to latest.
          # pyright-version: '1.1.165'
          working-directory: clang/bindings/python
          verbose: true
